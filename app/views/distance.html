<form name="distanceForm">
  <div class="form-group">
    <div class="input-group" ng-class="{'has-error': distanceForm.distance.$invalid}">
      <div class="input-group-addon">كيلو</div>
      <input type="number" min="1" max="1000000000" step="1" name="distance" required
             id="distance" class="form-control" dir="rtl" ng-model="vm.distance">
      <div class="input-group-btn">
       <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
         <span class="caret"></span>
         المسافة المقطوعة في
         <span ng-bind="vm.periodMenu.getVisualSelectedPeriod()"></span>
       </button>
       <ul class="dropdown-menu dropdown-menu-right">
         <li ng-class="{active: vm.periodMenu.isPeriodSelected('day')}" ng-click="vm.periodMenu.selectPeriod('day')">
           <a ng-click="$event.preventDefault()" href="#">المسافة المقطوعة في اليوم</a>
         </li>
         <li ng-class="{active: vm.periodMenu.isPeriodSelected('week')}" ng-click="vm.periodMenu.selectPeriod('week')">
           <a ng-click="$event.preventDefault()" href="#">المسافة المقطوعة في الاسبوع</a>
         </li>
         <li ng-class="{active: vm.periodMenu.isPeriodSelected('month')}" ng-click="vm.periodMenu.selectPeriod('month')">
           <a ng-click="$event.preventDefault()" href="#">المسافة المقطوعة في الشهر</a>
         </li>
         <li ng-class="{active: vm.periodMenu.isPeriodSelected('year')}" ng-click="vm.periodMenu.selectPeriod('year')">
           <a ng-click="$event.preventDefault()" href="#">المسافة المقطوعة في السنة</a>
         </li>
       </ul>
      </div>
    </div>
  </div>
</form>
<form name="consumptionForm">
  <div class="form-group">
    <div class="input-group" ng-class="{'has-error': consumptionForm.distanceForLiters.$invalid}">
      <div class="input-group-addon">كيلو/لتر</div>
      <input type="number" min="1" max="1000000000" step="1" name="distanceForLiters" required
             id="distanceForLiters" class="form-control" dir="rtl"
             ng-model="vm.distanceForLiters" ng-change="vm.setConsumption(vm.distanceForLiters)">
      <div class="input-group-addon">كفاءة استهلاك المركبة</div>
    </div>
    <span dir="rtl" class="help-block">
      <a target="_blank" href="https://www.sls.gov.sa/Pages/ar/Consumer/UsedVehicles.aspx"
         onclick="ga('send', 'event', 'Fuel Effeciency Link', 'click', 'Distance')">
        كفاءة الطاقة للسيارات
      </a>
    </span>
  </div>
</form>
<article ng-show="distanceForm.$valid && consumptionForm.$valid">
  <div class="table-responsive">
    <table class="table table-hover table-condensed table-bordered">
      <thead>
        <tr>
          <th class="text-center danger">الفرق</th>
          <th class="text-center warning">التكلفة سابقاً</th>
          <th class="text-center success">التكلفة حالياً</th>
          <th class="text-center active">المسافة</th>
          <th class="text-center active">المدة</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="pair in vm.periodTable" ng-init="period = pair[0]; factor = pair[1]">
          <td class="text-center danger" dir="rtl" style="border-right: 0; border-left: 0">
            <b ng-bind="vm.calculatePriceDifference(factor) | roundPrice:2"></b>
            <span class="hidden-xs" style="font-size: 0.6em">ريال</span>
          </td>
          <td class="text-center warning" dir="rtl">
            <span ng-bind="vm.calculatePrice('old', factor) | roundPrice:2"></span>
            <span class="hidden-xs" style="font-size: 0.6em">ريال</span>
          </td>
          <td class="text-center success" dir="rtl">
            <span ng-bind="vm.calculatePrice('new', factor) | roundPrice:2"></span>
            <span class="hidden-xs" style="font-size: 0.6em">ريال</span>
          </td>
          <td class="text-center active" dir="rtl">
            <span ng-bind="vm.calculateDistance(factor) | number:0"></span>
            <span class="hidden-xs" style="font-size: 0.6em">كم</span>
          </td>
          <th class="text-center active" ng-bind="period"></th>
        </tr>
      </tbody>
    </table>
  </div>
</article>
