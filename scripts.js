"use strict";angular.module("fuelCalculator",["ngRoute"]).config(["$routeProvider",function(e){e.when("/distance",{templateUrl:"views/distance.html",controller:"DistanceCtrl",controllerAs:"vm"}).when("/fuel-volume",{templateUrl:"views/fuel-volume.html",controller:"FuelVolumeCtrl",controllerAs:"vm"}).when("/tank-volume",{templateUrl:"views/tank-volume.html",controller:"TankVolumeCtrl",controllerAs:"vm"}).when("/cost",{templateUrl:"views/cost.html",controller:"CostCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/distance"})}]).run(["$rootScope","$location","$window",function(e,t,r){var i=null;e.$on("$routeChangeSuccess",function(e,n,l){var c=t.path();r.ga&&c!==i&&r.ga("send","pageview",{page:c}),i=c})}]),angular.module("fuelCalculator").service("settingsService",["$window",function(e){var t=this;this.fuelType=function(r){if(!r)return e.localStorage.getItem("fuelType")||"91";var i=t.fuelType();e.localStorage.setItem("fuelType",r),e.ga&&e.ga("send","event","Octane","change",i+"->"+r)},this.consumption=function(t){return t?void e.localStorage.setItem("consumption",parseFloat(t)||8):parseFloat(e.localStorage.getItem("consumption"))||8},this.alertsRead=function(t){return t?void e.localStorage.setItem("alertsRead",!!t):!!e.localStorage.getItem("alertsRead")}}]),angular.module("fuelCalculator").service("fuelService",function(){function e(){return d}function t(e,t,r){return e/t*r}function r(e,t){return"new"===e?"91"===t?.75:.9:"91"===t?.45:.6}function i(e,t){var i=r("new",e),n=t/i;return n}function n(e,t,r,n){var l=i(e,n),c=l*t/r;return c}function l(e,t,i){return i*r(e,t)}function c(e,t,r,i,n){var c=i/r,a=c*n;return l(e,t,a)}var a="يوم",u="اسبوع",o="شهر",s="سنة",d=[[a,1],[u,7],[o,30],[s,360]];this.roundPrice=function(e){return 10>e?e:Math.round(e)},this.calculateByDistance=c,this.calculateByVolume=l,this.calculateDistanceByVolume=t,this.calculateDistanceByPrice=n,this.calculateLitersByPrice=i,this.getPeriodTable=e,this.getLiterPrice=r}),angular.module("fuelCalculator").service("periodService",["$window",function(e){var t="اليوم",r="الاسبوع",i="الشهر",n="السنة",l={day:1,week:7,month:30,year:360},c={day:t,week:r,month:i,year:n};this.getPeriodMenu=function(t){var r=t||"day";return{getVisualSelectedPeriod:function(){return c[r]},isPeriodSelected:function(e){return e===r},selectPeriod:function(t){var i=r;r=t,e.ga&&e.ga("send","event","Period","change",i+"->"+t)},getValuePerDay:function(e){return e/l[r]}}}}]),angular.module("fuelCalculator").filter("roundPrice",["$filter","fuelService",function(e,t){var r=e("number");return function(e,i){return 10>e?r(e,i):t.roundPrice(e)}}]),angular.module("fuelCalculator").controller("FuelVolumeCtrl",["fuelService","periodService","settingsService",function(e,t,r){var i=this;this.periodTable=e.getPeriodTable(),this.periodMenu=t.getPeriodMenu(),this.volume=1,this.calculatePrice=function(t,n){var l=i.periodMenu.getValuePerDay(i.volume)*n;return e.calculateByVolume(t,r.fuelType(),l)},this.calculatePriceDifference=function(t){var r=i.calculatePrice("old",t),n=i.calculatePrice("new",t);return e.roundPrice(n)-e.roundPrice(r)}}]),angular.module("fuelCalculator").controller("TankVolumeCtrl",["fuelService","periodService","settingsService",function(e,t,r){var i=this;this.litersForDistance=1,this.tankVolume=64,this.fillTimes=1,this.periodTable=e.getPeriodTable(),this.periodMenu=t.getPeriodMenu("week"),this.distanceForLiters=r.consumption(),this.setConsumption=r.consumption,this.calculateDistance=function(t){var r=i.periodMenu.getValuePerDay(i.fillTimes)*t,n=i.tankVolume*r;return e.calculateDistanceByVolume(i.distanceForLiters,i.litersForDistance,n)},this.calculatePrice=function(t,n){var l=i.calculateDistance(n),c=r.fuelType();return e.calculateByDistance(t,c,i.distanceForLiters,i.litersForDistance,l)},this.calculatePriceDifference=function(t){var r=i.calculatePrice("old",t),n=i.calculatePrice("new",t);return e.roundPrice(n)-e.roundPrice(r)}}]),angular.module("fuelCalculator").controller("DistanceCtrl",["fuelService","periodService","settingsService",function(e,t,r){var i=this;this.litersForDistance=1,this.distance=15,this.distanceForLiters=r.consumption(),this.setConsumption=r.consumption,this.periodTable=e.getPeriodTable(),this.periodMenu=t.getPeriodMenu(),this.calculateDistance=function(e){var t=i.periodMenu.getValuePerDay(i.distance);return t*e},this.calculatePrice=function(t,n){var l=i.periodMenu.getValuePerDay(i.distance)*n,c=r.fuelType();return e.calculateByDistance(t,c,i.distanceForLiters,i.litersForDistance,l)},this.calculatePriceDifference=function(t){var r=i.calculatePrice("old",t),n=i.calculatePrice("new",t);return e.roundPrice(n)-e.roundPrice(r)}}]),angular.module("fuelCalculator").controller("CostCtrl",["fuelService","periodService","settingsService",function(e,t,r){var i=this;this.litersForDistance=1,this.cost=1,this.distanceForLiters=r.consumption(),this.setConsumption=r.consumption,this.periodTable=e.getPeriodTable(),this.periodMenu=t.getPeriodMenu(),this.calculateDistance=function(t){var n=i.periodMenu.getValuePerDay(i.cost)*t;return e.calculateDistanceByPrice(r.fuelType(),i.distanceForLiters,i.litersForDistance,n)},this.calculatePrice=function(t,n){var l=i.periodMenu.getValuePerDay(i.cost)*n,c=r.fuelType(),a=e.calculateDistanceByPrice(c,i.distanceForLiters,i.litersForDistance,l);return e.calculateByDistance(t,c,i.distanceForLiters,i.litersForDistance,a)},this.calculatePriceDifference=function(t){var r=i.calculatePrice("old",t),n=i.calculatePrice("new",t);return e.roundPrice(n)-e.roundPrice(r)}}]),angular.module("fuelCalculator").controller("NavbarCtrl",["settingsService",function(e){this.setFuelType=e.fuelType,this.isFuelType=function(t){return e.fuelType()===t}}]),angular.module("fuelCalculator").controller("TabsCtrl",["$location",function(e){this.isCurrentPath=function(t){return t===e.path()}}]),angular.module("fuelCalculator").controller("AlertsCtrl",["settingsService",function(e){this.alertsRead=function(){return e.alertsRead()},this.dismiss=function(){e.alertsRead(!0)}}]);